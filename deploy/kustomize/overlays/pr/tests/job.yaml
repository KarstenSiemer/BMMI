apiVersion: batch/v1
kind: Job
metadata:
  name: test-curl
  annotations:
    kube-score/ignore: pod-networkpolicy,container-ephemeral-storage-request-and-limit,container-security-context-readonlyrootfilesystem,container-security-context-user-group-id,container-security-context-privileged,container-security-context-readonlyrootfilesystem
spec:
  template:
    spec:
      containers:
        - name: hello-world
          image: alpine/curl:8.9.1
          imagePullPolicy: Always
          command: ['curl', '$WEB_ALIAS_DOMAIN:$WEB_ALIAS_PORT']
          env:
            - name: WEB_ALIAS_DOMAIN
              value: 'bmmi.prod.127.0.0.1.nip.io'
            - name: WEB_ALIAS_PORT
              value: '7080'
          resources:
            requests:
              memory: '128Mi'
              cpu: '100m'
            limits:
              memory: '128Mi'
              cpu: '100m'
      restartPolicy: Never
  backoffLimit: 4 # Optional: How many times to retry if the job fails
